<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Flipart online puzzle game</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Online free puzzle game. Flip image parts">
        <meta name="keywords" content="game, play, flip, image, puzzle">


        <script type="text/javascript" src="js/lib/jquery.js"></script>
        <script type="text/javascript" src="js/lib/underscore.js"></script>

        <script type="text/javascript" src="js/flipart.js"></script>

        <script type="text/javascript">
            flipart.urls.newgame = '/kserver/flipart/newgame';
            flipart.urls.image = '/kserver/flipart/image.png';
            flipart.computeSize($(window).width(), $(window).height());
        </script>
        <script type="text/javascript">
            $(function () {
                $('#dMenu img').on('mouseover', function () {
                    var sor = this.src;
                    sor = sor.replace('.png', '_sel.png');
                    this.src = sor;
                    //alert(sor)
                }).on('mouseout', function () {
                    var sor = this.src;
                    sor = sor.replace('_sel.png', '.png');
                    this.src = sor;
                }).on('click', function () {
                    var sor = this.src;
                    if (sor.indexOf(flipart.actions.playsingle) >= 0) {
                        flipart.playSingle('dPictureFrame', 'dTiles', 'dBlocks', onStartSingleDataRetrieved);
                    } else if (sor.indexOf(flipart.actions.startnew) >= 0) {
                        alert('new');
                    }
                });
      
            });


        </script>

        <link href="css/bootstrap.css" rel="stylesheet">
        <style>
            .center {
                margin-left: auto;
                margin-right: auto;
                text-align: center;
            }
            div.gamediv {
                width: 100%;
                height: 100%;
                display: none;
            }
            #dGameWindow {
                border: "1px";
                border-style: solid;
                border-color: #656273;  /* #80488f #e0fa33, yellow sun #e8d15d */
                position: relative;
            }
            #dMenu {
                position: absolute;
                width: 100%;
                bottom: 50px;
            }
            #dMenu img:hover {
                cursor: pointer;
            }
            #dPictureFrame {
                position: relative;
                Qborder: solid blue 1px;
            }
            #dPictureFrame > div {
                position: absolute;
                width: 100%;
                height: 100%;
            }
            #dPictureFrame div.tile, #dPictureFrame div.block {
                //background-image: url('/kserver/flipart/image.png');
                position: absolute;
            }
            #dPictureFrame div.block.selected {
                background-color: black;
                opacity: 0.5;
            }
            #dActions div.flip {
                display: none;
                position: absolute;
                text-align: center;
                vertical-align: middle;
            }
            #dActions div.flip a {
                color: yellow;
                font-family: comic sans ms;
                font-size: large;
                font-style: italic;
                Qfont-weight: bold;
            }
            #dActions div.flip img {
                width: 30px;
            }
            #dActions div.flip img:hover {
                border: 1px solid #285e8e;
                background-color: yellow;

            }
        </style>

    </head>
    <body>
        <!-- main game div, inner divs changes -->
        <div id="dGameWindow" class="center">
            <div id="dWelcome" class="gamediv" style="display: block;">
                <br><br>
                <img src="res/flipart/logo.png" alt="Flipart logo" />
                <div id="dMenu" class="center">

                    <ul style="list-style-type: none">
                        <li><img src="res/flipart/playsingle.png" /></li>
                        <li><a href="" ></a></li>
                        <li><img src="res/flipart/startnew.png" /></li>
                        <li><img src="res/flipart/continue.png" /></li>
                        <li><img src="res/flipart/inst.png" /></li>
                    </ul>
                </div>
            </div>
            <div id="dGame" class="gamediv" >
                <div id="dPictureFrame">        <!-- holds stacked game divs -->
                    <div id="dTiles"></div>
                    <div id="dBlocks"></div>
                    <div id="dActions">
                        <div id="dHorflip" class="flip">
                            <a href="javascript:flip(true)">
                                <img id="horflip" src="res/flipart/arrows_hor.png" />
                            </a>
                        </div>
                        <div id="dVerflip" class="flip">
                            <a href="http://komante.com">
                                <img id="verflip" src="res/flipart/arrows_ver.png" />
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            resizeGameWindow('welcome');
        </script>


        <!--GOOGLE ANALYTICS -->
        <script>
            if (location.origin.indexOf('komante.com') >= 0) {
                (function (i, s, o, g, r, a, m) {
                    i['GoogleAnalyticsObject'] = r;
                    i[r] = i[r] || function () {
                        (i[r].q = i[r].q || []).push(arguments)
                    }, i[r].l = 1 * new Date();
                    a = s.createElement(o),
                            m = s.getElementsByTagName(o)[0];
                    a.async = 1;
                    a.src = g;
                    m.parentNode.insertBefore(a, m)
                })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

                ga('create', 'UA-54433162-1', 'auto');
                ga('send', 'pageview');
            }
        </script>

        <script id="ttile" type="text/template" data-tileid="tile_i<%=i%>j<%=j%>">
            <div class="tile" id="tile_i<%=i%>j<%=j%>" 
            style="top:<%=top%>px; left:<%=left%>px; width:<%=w%>px; height:<%=h%>px; background-position: <%=pozx%>px <%=pozy%>px"></div> 
        </script>
        <script id="tblock" type="text/template" data-blockid="block_i<%=i%>j<%=j%>" data-border="3px dashed yellow">
            <div class="block" id="block_i<%=i%>j<%=j%>" style="top:<%=top%>px; left:<%=left%>px; width:<%=w%>px; height:<%=h%>px; "></div> 
        </script>
    </body>
</html>
